# –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–µ—Ä–µ–Ω–æ—Å—É –∏–∑ DigitalOcean –≤ Supabase (Bolt/Claude Code)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–Ω–æ—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞ Link Manager –∏–∑ DigitalOcean PostgreSQL –≤ Supabase –≤ —Å—Ä–µ–¥–µ Bolt/Claude Code.

## üìã –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase
- –í—Å–µ 15 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã —Å –ø–æ–ª–Ω–æ–π —Å—Ö–µ–º–æ–π
- RLS (Row Level Security) –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
- 60+ –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- 50+ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Discount tiers (6 —É—Ä–æ–≤–Ω–µ–π) —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- `.env` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ Supabase
- `.env.example` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- `backend/config/database.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Supabase
- SSL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–µ–Ω –¥–ª—è Supabase

### ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏
- `scripts/export-from-digitalocean.js` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- `scripts/import-to-supabase.js` - –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- `test-supabase-connection.js` - —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Supabase

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ Bolt. –í–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å:

1. **–í Bolt/Claude Code:** –±–∞–∑–∞ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å –∏–∑ Supabase Dashboard

**–ì–¥–µ –Ω–∞–π—Ç–∏ –ø–∞—Ä–æ–ª—å:**
- –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
- –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `0ec90b57d6e95fcbda19832f`
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Database
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection String –∏ –Ω–∞–π–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å

### –®–∞–≥ 2: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ DigitalOcean

**–ù–∞ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–µ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ DigitalOcean:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export OLD_DB_HOST=–≤–∞—à-—Ö–æ—Å—Ç.ondigitalocean.com
export OLD_DB_PORT=25060
export OLD_DB_NAME=linkmanager
export OLD_DB_USER=doadmin
export OLD_DB_PASSWORD=–≤–∞—à-–ø–∞—Ä–æ–ª—å

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç
node scripts/export-from-digitalocean.js
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `migration-data/export-TIMESTAMP.json` —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

### –®–∞–≥ 3: –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Supabase

**–í Bolt/Claude Code –∏–ª–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:**

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ Supabase
# –í Bolt —ç—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–º–ø–æ—Ä—Ç
node scripts/import-to-supabase.js migration-data/export-XXXXXXXXXX.json
```

–°–∫—Ä–∏–ø—Ç:
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (—Å–æ–±–ª—é–¥–∞—è foreign keys)
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã (ON CONFLICT DO NOTHING)
- –û–±–Ω–æ–≤–ª—è–µ—Ç sequences –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã AUTO_INCREMENT
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–∫–∞—Ç–∏—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
node test-supabase-connection.js
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫ –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –†–∞–±–æ—Ç—É initDatabase()

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ò–ª–∏ –≤ production —Ä–µ–∂–∏–º–µ
npm start
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

### –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ WordPress –ø–ª–∞–≥–∏–Ω–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å WordPress —Å–∞–π—Ç—ã —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø–ª–∞–≥–∏–Ω–æ–º:

1. –û–±–Ω–æ–≤–∏—Ç–µ API endpoint –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–ª–∞–≥–∏–Ω–∞
2. –°—Ç–∞—Ä—ã–π: `https://your-digitalocean-server.com/api`
3. –ù–æ–≤—ã–π: `https://your-bolt-deployment-url.com/api`

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

–í Bolt —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
```env
DB_HOST=0ec90b57d6e95fcbda19832f.supabase.co
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres
```

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
```env
DB_PASSWORD=–≤–∞—à-–ø–∞—Ä–æ–ª—å-–∏–∑-supabase
JWT_SECRET=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (balance, referrals, security)
- **projects** - –ü—Ä–æ–µ–∫—Ç—ã —Å—Å—ã–ª–æ–∫
- **sites** - WordPress —Å–∞–π—Ç—ã (—Å –º–µ—Ç—Ä–∏–∫–∞–º–∏: DA, DR, TF, CF)
- **project_links** - –°—Å—ã–ª–∫–∏ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è (—Å JSONB –ø–æ–ª—è–º–∏)
- **project_articles** - –°—Ç–∞—Ç—å–∏ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
- **placements** - –ó–∞–∫–∞–∑—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è (pricing, renewal)
- **placement_content** - –°–≤—è–∑—å —Ä–∞–∑–º–µ—â–µ–Ω–∏–π —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º

#### Billing —Å–∏—Å—Ç–µ–º–∞:
- **transactions** - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **discount_tiers** - –£—Ä–æ–≤–Ω–∏ —Å–∫–∏–¥–æ–∫ (0%-30%)
- **renewal_history** - –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–ª–µ–Ω–∏–π

#### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:
- **referral_transactions** - –ö–æ–º–∏—Å—Å–∏–∏ 20%
- **referral_withdrawals** - –í—ã–≤–æ–¥—ã

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- **notifications** - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **audit_log** - –õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **registration_tokens** - –¢–æ–∫–µ–Ω—ã –¥–ª—è WordPress –ø–ª–∞–≥–∏–Ω–∞

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS)

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞—â–∏—â–µ–Ω—ã RLS:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- –ü—É–±–ª–∏—á–Ω—ã–µ —Å–∞–π—Ç—ã (`is_public=true`) –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º
- –ê–¥–º–∏–Ω—ã –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- Service role (backend) –æ–±—Ö–æ–¥–∏—Ç RLS

### API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã:
```javascript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ
const token = jwt.sign({ userId: user.id, role: user.role },
                       process.env.JWT_SECRET,
                       { expiresIn: '7d' });
```

### WordPress –ø–ª–∞–≥–∏–Ω

–ü–ª–∞–≥–∏–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `api_key` –≤ —Ç–∞–±–ª–∏—Ü–µ sites:
- –ö–∞–∂–¥—ã–π —Å–∞–π—Ç –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π API key
- API key –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π

```sql
-- –í Supabase SQL Editor
SELECT
  'users' as table_name, COUNT(*) as count FROM users
UNION ALL
SELECT 'projects', COUNT(*) FROM projects
UNION ALL
SELECT 'sites', COUNT(*) FROM sites
UNION ALL
SELECT 'placements', COUNT(*) FROM placements
UNION ALL
SELECT 'transactions', COUNT(*) FROM transactions;
```

–°—Ä–∞–≤–Ω–∏—Ç–µ —Å DigitalOcean.

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```sql
SELECT id, username, email, balance, total_spent
FROM users
ORDER BY total_spent DESC
LIMIT 10;
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ discount tiers

```sql
SELECT * FROM discount_tiers ORDER BY min_spent;
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å 6 —É—Ä–æ–≤–Ω–µ–π: Standard (0%), Bronze (10%), Silver (15%), Gold (20%), Platinum (25%), Diamond (30%).

### 4. –¢–µ—Å—Ç API endpoint

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:3000/api/health

# –õ–æ–≥–∏–Ω
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"testpass"}'
```

---

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### –°–ø–æ—Å–æ–± 1: pg_dump (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –ë–î)

```bash
# –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ —Å—Ö–µ–º—ã)
pg_dump -h digitalocean-host \
        -U doadmin \
        -d linkmanager \
        --data-only \
        --no-owner \
        --no-privileges \
        -f data-export.sql

# –ò–º–ø–æ—Ä—Ç –≤ Supabase
psql -h 0ec90b57d6e95fcbda19832f.supabase.co \
     -U postgres \
     -d postgres \
     -f data-export.sql
```

### –°–ø–æ—Å–æ–± 2: Supabase Dashboard

1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ CSV
2. –ó–∞–π–¥–∏—Ç–µ –≤ Supabase Dashboard ‚Üí Table Editor
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ CSV –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã

### –°–ø–æ—Å–æ–± 3: pgloader

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pgloader
apt-get install pgloader

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ migration.load
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
pgloader migration.load
```

---

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞: "Connection refused"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Supabase

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ DB_HOST –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SSL –≤–∫–ª—é—á–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ
3. –í Bolt - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ

### –û—à–∏–±–∫–∞: "Password authentication failed"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DB_PASSWORD –≤ .env
2. –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–∑ Supabase Dashboard
3. –í Bolt - –ø–∞—Ä–æ–ª—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –û—à–∏–±–∫–∞: "Duplicate key violates unique constraint"

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ Supabase

**–†–µ—à–µ–Ω–∏–µ:**
- –°–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ON CONFLICT DO NOTHING`
- –î—É–±–ª–∏–∫–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
- –î–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞:

```sql
-- –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!
TRUNCATE users, projects, sites, placements CASCADE;
```

### –û—à–∏–±–∫–∞: "Foreign key constraint violation"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞—Ä—É—à–µ–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –°–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ foreign keys –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –≤ export —Ñ–∞–π–ª–µ

### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```sql
-- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
ANALYZE;

-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
EXPLAIN ANALYZE SELECT * FROM placements WHERE status = 'active';
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### Connection Pooling

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pg Pool —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
```javascript
{
  max: 25,              // –ú–∞–∫—Å–∏–º—É–º 25 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 30000
}
```

### –ò–Ω–¥–µ–∫—Å—ã

–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ–ª—è –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã:
- Foreign keys
- Status –ø–æ–ª—è
- –î–∞—Ç—ã (created_at, expires_at)
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Redis:
```env
REDIS_HOST=your-redis-host
REDIS_PORT=6379
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –≤ Supabase Dashboard
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

### 2. –ë—ç–∫–∞–ø—ã

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø (–¥–æ–±–∞–≤—å—Ç–µ –≤ cron)
node scripts/backup-database.sh
```

Supabase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç daily backups (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π).

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ Supabase Logs
- –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ connection pooler –¥–ª—è production

### 4. WordPress –ø–ª–∞–≥–∏–Ω—ã

- –û–±–Ω–æ–≤–∏—Ç–µ API endpoint –≤–æ –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —é–Ω–∏—Ç —Ç–µ—Å—Ç—ã
npm test

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ API endpoints
npm run test:api
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `logs/app.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase Dashboard ‚Üí Logs
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `test-supabase-connection.js`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

---

## ‚úÖ Checklist –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –í—Å–µ 15 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã
- [ ] RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ Supabase
- [ ] –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ DigitalOcean
- [ ] –î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ Supabase
- [ ] –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–π–¥–µ–Ω
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- [ ] API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] WordPress –ø–ª–∞–≥–∏–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

**–î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:** –î–µ–∫–∞–±—Ä—å 2024
**Supabase Project ID:** 0ec90b57d6e95fcbda19832f
**–í–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã:** 2.0 (Full Migration)
**Bolt/Claude Code:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ
