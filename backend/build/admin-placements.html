<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Å–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è - Link Manager Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/sidebar.css">
</head>
<body>
    <div class="container-fluid">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>üì¶ –í—Å–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</h1>
            <div class="btn-group">
                <button class="btn btn-success" onclick="exportPlacements('csv')">
                    <i class="bi bi-file-earmark-spreadsheet"></i> CSV
                </button>
                <button class="btn btn-primary" onclick="exportPlacements('json')">
                    <i class="bi bi-filetype-json"></i> JSON
                </button>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card border-primary">
                    <div class="card-body text-center">
                        <h6 class="card-subtitle mb-2 text-muted">–í—Å–µ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏–π</h6>
                        <h2 class="text-primary mb-0" id="totalPlacements">0</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-success">
                    <div class="card-body text-center">
                        <h6 class="card-subtitle mb-2 text-muted">–ê–∫—Ç–∏–≤–Ω—ã—Ö</h6>
                        <h2 class="text-success mb-0" id="activePlacements">0</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-warning">
                    <div class="card-body text-center">
                        <h6 class="card-subtitle mb-2 text-muted">–° –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º</h6>
                        <h2 class="text-warning mb-0" id="autoRenewalPlacements">0</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-info">
                    <div class="card-body text-center">
                        <h6 class="card-subtitle mb-2 text-muted">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö</h6>
                        <h2 class="text-info mb-0" id="scheduledPlacements">0</h2>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-2">
                        <label class="form-label">–¢–∏–ø</label>
                        <select class="form-select" id="typeFilter">
                            <option value="">–í—Å–µ</option>
                            <option value="link">–°—Å—ã–ª–∫–∏</option>
                            <option value="article">–°—Ç–∞—Ç—å–∏</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">–°—Ç–∞—Ç—É—Å</label>
                        <select class="form-select" id="statusFilter">
                            <option value="">–í—Å–µ</option>
                            <option value="placed">–†–∞–∑–º–µ—â–µ–Ω–æ</option>
                            <option value="scheduled">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</option>
                            <option value="expired">–ò—Å—Ç–µ–∫–ª–æ</option>
                            <option value="pending">–û–∂–∏–¥–∞–Ω–∏–µ</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</label>
                        <input type="text" class="form-control" id="userFilter" placeholder="Username">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">–°–∞–π—Ç</label>
                        <input type="text" class="form-control" id="siteFilter" placeholder="URL —Å–∞–π—Ç–∞">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">–î–∞—Ç–∞ –æ—Ç</label>
                        <input type="date" class="form-control" id="dateFrom">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">–î–∞—Ç–∞ –¥–æ</label>
                        <input type="date" class="form-control" id="dateTo">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <button class="btn btn-primary" onclick="applyFilters()">
                            <i class="bi bi-funnel"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                        </button>
                        <button class="btn btn-secondary" onclick="resetFilters()">
                            <i class="bi bi-x-circle"></i> –°–±—Ä–æ—Å–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Placements Table -->
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span><i class="bi bi-list-ul"></i> –°–ø–∏—Å–æ–∫ —Ä–∞–∑–º–µ—â–µ–Ω–∏–π</span>
                <div class="d-flex align-items-center gap-3">
                    <div class="d-flex align-items-center gap-2">
                        <label class="mb-0 text-muted small">–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:</label>
                        <select class="form-select form-select-sm" style="width: auto;" onchange="changePageSize(this.value)" id="pageSizeSelect">
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                            <option value="500">500</option>
                        </select>
                    </div>
                    <span class="badge bg-purple" id="placementsCount">0</span>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover table-sm">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–ü—Ä–æ–µ–∫—Ç</th>
                                <th>–°–∞–π—Ç</th>
                                <th>–¢–∏–ø</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–°–∫–∏–¥–∫–∞</th>
                                <th>–ò—Ç–æ–≥–æ</th>
                                <th>–î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏</th>
                                <th>–ò—Å—Ç–µ–∫–∞–µ—Ç</th>
                                <th>–ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="placementsTableBody">
                            <tr>
                                <td colspan="12" class="text-center">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <nav>
                    <ul class="pagination justify-content-center" id="pagination">
                        <!-- Pagination will be generated by JS -->
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <!-- Placement Details Modal -->
    <div class="modal fade" id="placementDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–î–µ—Ç–∞–ª–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è #<span id="detailsId"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="detailsBody">
                    <!-- Details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/security.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/translations.js"></script>
    <script src="/js/badge-utils.js"></script>
    <script src="/js/sidebar.js"></script>
    <script>
        SidebarNav.init({
            activePage: 'admin-placements',
            pageTitle: '–í—Å–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è',
            pageSubtitle: '–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è–º–∏',
            pageIcon: 'collection',
            pageIconGradient: 'gradient-purple-pink'
        });
    </script>
    <script src="/js/admin-placements.js"></script>
</body>
</html>
